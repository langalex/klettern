!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var b=a(document).height(),c=this.$window.scrollTop(),d=this.$element.offset(),e=this.options.offset,f=e.bottom,g=e.top,h="affix affix-top affix-bottom",i;typeof e!="object"&&(f=g=e),typeof g=="function"&&(g=e.top()),typeof f=="function"&&(f=e.bottom()),i=this.unpin!=null&&c+this.unpin<=d.top?!1:f!=null&&d.top+this.$element.height()>=b-f?"bottom":g!=null&&c<=g?"top":!1;if(this.affixed===i)return;this.affixed=i,this.unpin=i=="bottom"?d.top-c:null,this.$element.removeClass(h).addClass("affix"+(i?"-"+i:""))},a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f=typeof c=="object"&&c;e||d.data("affix",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery),!function(a){function d(){e(a(b)).removeClass("open")}function e(b){var c=b.attr("data-target"),d;return c||(c=b.attr("href"),c=c&&c.replace(/.*(?=#[^\s]*$)/,"")),d=a(c),d.length||(d=b.parent()),d}"use strict";var b="[data-toggle=dropdown]",c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),f,g;if(c.is(".disabled, :disabled"))return;return f=e(c),g=f.hasClass("open"),d(),g||(f.toggleClass("open"),c.focus()),!1},keydown:function(b){var c,d,f,g,h,i;if(!/(38|40|27)/.test(b.keyCode))return;c=a(this),b.preventDefault(),b.stopPropagation();if(c.is(".disabled, :disabled"))return;g=e(c),h=g.hasClass("open");if(!h||h&&b.keyCode==27)return c.click();d=a("[role=menu] li:not(.divider) a",g);if(!d.length)return;i=d.index(d.filter(":focus")),b.keyCode==38&&i>0&&i--,b.keyCode==40&&i<d.length-1&&i++,~i||(i=0),d.eq(i).focus()}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api touchstart.dropdown.data-api",d),a("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown",function(a){a.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",b,c.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",b+", [role=menu]",c.prototype.keydown)})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove(),this},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;a("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1).focus(),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();var c=this;b=a.Event("hide"),this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=!1,a("body").removeClass("modal-open"),this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){b.which==27&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(a){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(this.removeBackdrop,this)):this.removeBackdrop()):b&&b()}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})})}(window.jQuery),!function(a){a(function(){"use strict",a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in b)if(a.style[c]!==undefined)return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content > *")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=a(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),(a.browser.webkit||a.browser.msie)&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},move:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()},keydown:function(b){this.suppressKeyPressRepeat=!~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){if(this.suppressKeyPressRepeat)return;this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},blur:function(a){var b=this;setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault(),c.typeahead(c.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},to:function(b){var c=this.$element.find(".item.active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j=a.Event("slide",{relatedTarget:e[0]});this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h]();if(e.hasClass("active"))return;if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c),g=typeof c=="string"?c:f.slide;e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):g?e[g]():f.interval&&e.cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=!e.data("modal")&&a.extend({},e.data(),c.data());e.carousel(f),b.preventDefault()})})}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll-spy.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}"use strict",b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&d.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning)return;b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning)return;b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a!==null?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c.type=="show"&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();c[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active a").last()[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})})}(window.jQuery);var Events,Hoodie,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},__bind=function(a,b){return function(){return a.apply(b,arguments)}};Events=function(){function a(){}return a.prototype.bind=function(a,b){var c,d,e,f,g,h;d=a.split(" "),c=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={}),h=[];for(f=0,g=d.length;f<g;f++)e=d[f],c[e]||(c[e]=[]),h.push(c[e].push(b));return h},a.prototype.on=a.prototype.bind,a.prototype.one=function(a,b){return this.bind(a,function(){return this.unbind(a,arguments.callee),b.apply(this,arguments)})},a.prototype.trigger=function(){var a,b,c,d,e,f,g;a=1<=arguments.length?__slice.call(arguments,0):[],c=a.shift(),d=this.hasOwnProperty("_callbacks")&&((g=this._callbacks)!=null?g[c]:void 0);if(!d)return;for(e=0,f=d.length;e<f;e++)b=d[e],b.apply(this,a);return!0},a.prototype.unbind=function(a,b){var c,d,e,f,g,h;if(!a)return this._callbacks={},this;e=(h=this._callbacks)!=null?h[a]:void 0;if(!e)return this;if(!b)return delete this._callbacks[a],this;for(d=f=0,g=e.length;f<g;d=++f){c=e[d];if(c!==b)continue;e=e.slice(),e.splice(d,1),this._callbacks[a]=e;break}return this},a}(),Hoodie=function(a){function b(a){this.baseUrl=a,this.baseUrl?this.baseUrl=this.baseUrl.replace(/\/+$/,""):this.baseUrl=location.protocol+"//api."+location.hostname.replace(/^www\./,""),this.store=new this.constructor.LocalStore(this),this.config=new this.constructor.Config(this),this.account=new this.constructor.Account(this),this.remote=new this.constructor.AccountRemote(this),this._loadExtensions()}return __extends(b,a),b.prototype.request=function(a,b,c){var d;return c==null&&(c={}),d={type:a,url:""+this.baseUrl+b,xhrFields:{withCredentials:!0},crossDomain:!0,dataType:"json"},$.ajax($.extend(d,c))},b.prototype.open=function(a,c){return c==null&&(c={}),$.extend(c,{name:a}),new b.Remote(this,c)},b.prototype.uuid=function(a){var b,c,d;return a==null&&(a=7),b="0123456789abcdefghijklmnopqrstuvwxyz".split(""),d=b.length,function(){var e,f;f=[];for(c=e=0;0<=a?e<a:e>a;c=0<=a?++e:--e)f.push(b[0|Math.random()*d]);return f}().join("")},b.prototype.defer=$.Deferred,b.prototype.isPromise=function(a){return typeof (a!=null?a.done:void 0)=="function"&&typeof a.resolve=="undefined"},b.prototype.resolveWith=function(){var a;return(a=this.defer()).resolve.apply(a,arguments).promise()},b.prototype.rejectWith=function(){var a;return(a=this.defer()).reject.apply(a,arguments).promise()},b.extend=function(a,b){return this._extensions||(this._extensions={}),this._extensions[a]=b},b.prototype.extend=function(a,b){return this[a]=new b(this)},b.prototype._loadExtensions=function(){var a,b,c,d;c=this.constructor._extensions,d=[];for(b in c)a=c[b],d.push(this[b]=new a(this));return d},b}(Events),Hoodie.Account=function(){function a(a){this.hoodie=a,this._handleChangeUsernameAndPasswordRequest=__bind(this._handleChangeUsernameAndPasswordRequest,this),this._sendChangeUsernameAndPasswordRequest=__bind(this._sendChangeUsernameAndPasswordRequest,this),this._cleanup=__bind(this._cleanup,this),this._handleFetchBeforeDestroySucces=__bind(this._handleFetchBeforeDestroySucces,this),this._handlePasswordResetStatusRequestError=__bind(this._handlePasswordResetStatusRequestError,this),this._handlePasswordResetStatusRequestSuccess=__bind(this._handlePasswordResetStatusRequestSuccess,this),this._checkPasswordResetStatus=__bind(this._checkPasswordResetStatus,this),this._handleSignInSuccess=__bind(this._handleSignInSuccess,this),this._delayedSignIn=__bind(this._delayedSignIn,this),this._handleSignUpSucces=__bind(this._handleSignUpSucces,this),this._handleRequestError=__bind(this._handleRequestError,this),this._handleAuthenticateSuccess=__bind(this._handleAuthenticateSuccess,this),this.fetch=__bind(this.fetch,this),this.authenticate=__bind(this.authenticate,this),this.username=this.hoodie.config.get("_account.username"),this.ownerHash=this.hoodie.config.get("_account.ownerHash"),this.ownerHash||this._setOwner(this.hoodie.uuid()),window.setTimeout(this.authenticate),this._checkPasswordResetStatus()}return a.prototype.username=void 0,a.prototype.authenticate=function(){return this.username?this._authenticated===!0?this.hoodie.defer().resolve(this.username).promise():this._authenticated===!1?this.hoodie.defer().reject().promise():this.hoodie.request("GET","/_session").pipe(this._handleAuthenticateSuccess,this._handleRequestError):(this._sendSignOutRequest(),this.hoodie.defer().reject().promise())},a.prototype.signUp=function(a,b){var c;return b==null&&(b=""),a?this.hasAnonymousAccount()?this._upgradeAnonymousAccount(a,b):this.hasAccount()?this.hoodie.defer().reject({error:"you have to sign out first"}).promise():(c={data:JSON.stringify({_id:this._key(a),name:this._userKey(a),type:"user",roles:[],password:b,ownerHash:this.ownerHash,database:this.db()}),contentType:"application/json"},this.hoodie.request("PUT",this._url(a),c).pipe(this._handleSignUpSucces(a,b),this._handleRequestError)):this.hoodie.defer().reject({error:"username must be set"}).promise()},a.prototype.anonymousSignUp=function(){var a,b,c=this;return a=this.hoodie.uuid(10),b=this.ownerHash,this.signUp(b,a).pipe(null,this._handleRequestError).done(function(){return c.hoodie.config.set("_account.anonymousPassword",a),c.trigger("signup:anonymous",b)})},a.prototype.hasAccount=function(){return this.username!=null},a.prototype.hasAnonymousAccount=function(){return this.hoodie.config.get("_account.anonymousPassword")!=null},a.prototype.signIn=function(a,b){var c=this;return b==null&&(b=""),this.signOut().pipe(function(){return c._sendSignInRequest(a,b)})},a.prototype.signOut=function(){return this.hasAccount()?(this.hoodie.remote.disconnect(),this._sendSignOutRequest().pipe(this._cleanup)):this._cleanup()},a.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1account:$2"),this.hoodie.on(a,b)},a.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,["account:"+a].concat(__slice.call(b)))},a.prototype.db=function(){return"user/"+this.ownerHash},a.prototype.fetch=function(a){var b=this;return a==null&&(a=this.username),a?this._withSingleRequest("fetch",function(){return b.hoodie.request("GET",b._url(a)).pipe(null,b._handleRequestError).done(function(a){return b._doc=a})}):this.hoodie.defer().reject({error:"unauthenticated",reason:"not logged in"}).promise()},a.prototype.changePassword=function(a,b){return this.username?(this.hoodie.remote.disconnect(),this.fetch().pipe(this._sendChangeUsernameAndPasswordRequest(a,null,b),this._handleRequestError)):this.hoodie.defer().reject({error:"unauthenticated",reason:"not logged in"}).promise()},a.prototype.resetPassword=function(a){var b,c,d,e,f=this;return(e=this.hoodie.config.get("_account.resetPasswordId"))?this._checkPasswordResetStatus():(e=""+a+"/"+this.hoodie.uuid(),this.hoodie.config.set("_account.resetPasswordId",e),c=""+this._prefix+":$passwordReset/"+e,b={_id:c,name:"$passwordReset/"+e,type:"user",roles:[],password:e,$createdAt:new Date,$updatedAt:new Date},d={data:JSON.stringify(b),contentType:"application/json"},this._withPreviousRequestsAborted("resetPassword",function(){return f.hoodie.request("PUT","/_users/"+encodeURIComponent(c),d).pipe(null,f._handleRequestError).done(f._checkPasswordResetStatus)}))},a.prototype.changeUsername=function(a,b){return this._changeUsernameAndPassword(a,b)},a.prototype.destroy=function(){return this.hasAccount()?this.fetch().pipe(this._handleFetchBeforeDestroySucces,this._handleRequestError).pipe(this._cleanup):this._cleanup()},a.prototype._prefix="org.couchdb.user",a.prototype._doc={},a.prototype._requests={},a.prototype._setUsername=function(a){return this.username=a,this.hoodie.config.set("_account.username",this.username)},a.prototype._setOwner=function(a){return this.ownerHash=a,this.hoodie.config.set("$createdBy",this.ownerHash),this.hoodie.config.set("_account.ownerHash",this.ownerHash)},a.prototype._handleAuthenticateSuccess=function(a){var b;return b=this.hoodie.defer(),a.userCtx.name?(this._authenticated=!0,this._setUsername(a.userCtx.name.replace(/^user(_anonymous)?\//,"")),this._setOwner(a.userCtx.roles[0]),b.resolve(this.username)):(this._authenticated=!1,this.trigger("error:unauthenticated"),b.reject()),b.promise()},a.prototype._handleRequestError=function(a){var b;a==null&&(a={});try{b=JSON.parse(a.responseText)}catch(c){b={error:a.responseText||"unknown"}}return this.hoodie.defer().reject(b).promise()},a.prototype._handleSignUpSucces=function(a,b){var c,d=this;return c=this.hoodie.defer(),function(c){return d.trigger("signup",a),d._doc._rev=c.rev,d._delayedSignIn(a,b)}},a.prototype._delayedSignIn=function(a,b){var c,d=this;return c=this.hoodie.defer(),window.setTimeout(function(){var e;return e=d._sendSignInRequest(a,b),e.done(c.resolve),e.fail(function(e){return e.error==="unconfirmed"?d._delayedSignIn(a,b):c.reject.apply(c,arguments)})},300),c.promise()},a.prototype._handleSignInSuccess=function(a){var b,c,d=this;return b=this.hoodie.defer(),c=a.name.replace(/^user(_anonymous)?\//,""),~a.roles.indexOf("error")?(this.fetch(c).fail(b.reject).done(function(){return b.reject({error:"error",reason:d._doc.$error})}),b.promise()):~a.roles.indexOf("confirmed")?(this._authenticated=!0,this._setOwner(a.roles[0]),this._setUsername(c),this.hasAnonymousAccount()?this.trigger("signin:anonymous",c):this.trigger("signin",c),this.fetch(),b.resolve(this.username,a.roles[0])):b.reject({error:"unconfirmed",reason:"account has not been confirmed yet"})},a.prototype._checkPasswordResetStatus=function(){var a,b,c,d,e,f=this;return c=this.hoodie.config.get("_account.resetPasswordId"),c?(e="$passwordReset/"+c,d="/_users/"+encodeURIComponent(""+this._prefix+":"+e),a=btoa(""+e+":"+c),b={headers:{Authorization:"Basic "+a}},this._withPreviousRequestsAborted("passwordResetStatus",function(){return f.hoodie.request("GET",d,b).pipe(f._handlePasswordResetStatusRequestSuccess,f._handlePasswordResetStatusRequestError).fail(function(a){if(a.error==="pending"){window.setTimeout(f._checkPasswordResetStatus,1e3);return}return f.trigger("password_reset:error")})})):this.hoodie.defer().reject({error:"missing"}).promise()},a.prototype._handlePasswordResetStatusRequestSuccess=function(a){var b;return b=this.hoodie.defer(),a.$error?b.reject(a.$error):b.reject({error:"pending"}),b.promise()},a.prototype._handlePasswordResetStatusRequestError=function(a){return a.status===401?(this.hoodie.config.remove("_account.resetPasswordId"),this.trigger("passwordreset"),this.hoodie.defer().resolve()):this._handleRequestError(a)},a.prototype._changeUsernameAndPassword=function(a,b,c){var d=this;return this._sendSignInRequest(this.username,a).pipe(function(){return d.fetch().pipe(d._sendChangeUsernameAndPasswordRequest(a,b,c))})},a.prototype._upgradeAnonymousAccount=function(a,b){var c,d=this;return c=this.hoodie.config.get("_account.anonymousPassword"),this._changeUsernameAndPassword(c,a,b).done(function(){return d.trigger("signup",a),d.hoodie.config.remove("_account.anonymousPassword")})},a.prototype._handleFetchBeforeDestroySucces=function(){var a=this;return this.hoodie.remote.disconnect(),this._doc._deleted=!0,this._withPreviousRequestsAborted("updateUsersDoc",function(){return a.hoodie.request("PUT",a._url(),{data:JSON.stringify(a._doc),contentType:"application/json"})})},a.prototype._cleanup=function(){return delete this.username,delete this._authenticated,this.hoodie.config.clear(),this.trigger("signout"),this._setOwner(this.hoodie.uuid()),this.hoodie.defer().resolve().promise()},a.prototype._userKey=function(a){return a===this.ownerHash?"user_anonymous/"+a:"user/"+a},a.prototype._key=function(a){return a==null&&(a=this.username),""+this._prefix+":"+this._userKey(a)},a.prototype._url=function(a){return"/_users/"+encodeURIComponent(this._key(a))},a.prototype._sendChangeUsernameAndPasswordRequest=function(a,b,c){var d=this;return function(){var e,f;return e=$.extend({},d._doc),b&&(e.$newUsername=b),c!=null&&(delete e.salt,delete e.password_sha,e.password=c),f={data:JSON.stringify(e),contentType:"application/json"},d._withPreviousRequestsAborted("updateUsersDoc",function(){return d.hoodie.request("PUT",d._url(),f).pipe(d._handleChangeUsernameAndPasswordRequest(b,c||a),d._handleRequestError)})}},a.prototype._handleChangeUsernameAndPasswordRequest=function(a,b){var c=this;return function(){return c.hoodie.remote.disconnect(),a?c._delayedSignIn(a,b):c.signIn(c.username,b)}},a.prototype._withPreviousRequestsAborted=function(a,b){var c;return(c=this._requests[a])!=null&&typeof c.abort=="function"&&c.abort(),this._requests[a]=b()},a.prototype._withSingleRequest=function(a,b){var c;return((c=this._requests[a])!=null?typeof c.state=="function"?c.state():void 0:void 0)==="pending"?this._requests[a]:this._requests[a]=b()},a.prototype._sendSignOutRequest=function(){var a=this;return this._withSingleRequest("signOut",function(){return a.hoodie.request("DELETE","/_session").pipe(null,a._handleRequestError)})},a.prototype._sendSignInRequest=function(a,b){var c,d=this;return c={data:{name:this._userKey(a),password:b}},this._withPreviousRequestsAborted("signIn",function(){var a;return a=d.hoodie.request("POST","/_session",c),a.pipe(d._handleSignInSuccess,d._handleRequestError)})},a}(),Hoodie.Config=function(){function a(a,b){var c=this;this.hoodie=a,b==null&&(b={}),this.clear=__bind(this.clear,this),b.$type&&(this.$type=b.$type),b.id&&(this.id=b.id),this.hoodie.store.find(this.$type,this.id).done(function(a){return c.cache=a}),this.hoodie.on("account:signedOut",this.clear)}return a.prototype.$type="$config",a.prototype.id="hoodie",a.prototype.cache={},a.prototype.set=function(a,b){var c,d;if(this.cache[a]===b)return;return this.cache[a]=b,d={},d[a]=b,c=a.charAt(0)==="_",this.hoodie.store.update(this.$type,this.id,d,{silent:c})},a.prototype.get=function(a){return this.cache[a]},a.prototype.clear=function(){return this.cache={},this.hoodie.store.remove(this.$type,this.id)},a.prototype.remove=a.prototype.set,a}(),Hoodie.Email=function(){function a(a){this.hoodie=a,this._handleEmailUpdate=__bind(this._handleEmailUpdate,this)}return a.prototype.send=function(a){var b,c,d=this;return a==null&&(a={}),c=this.hoodie.defer(),b=$.extend({},a),this._isValidEmail(a.to)?(this.hoodie.store.add("$email",b).then(function(a){return d._handleEmailUpdate(c,a)}),c.promise()):(b.error="Invalid email address ("+(b.to||"empty")+")",c.reject(b).promise())},a.prototype._isValidEmail=function(a){return a==null&&(a=""),/@/.test(a)},a.prototype._handleEmailUpdate=function(a,b){var c=this;return b==null&&(b={}),b.error?a.reject(b):b.deliveredAt?a.resolve(b):this.hoodie.remote.one("updated:$email:"+b.id,function(b){return c._handleEmailUpdate(a,b)})},a}(),Hoodie.extend("email",Hoodie.Email),Hoodie.Errors={INVALID_KEY:function(a){var b;return b=a.id?"id":"type",new Error("invalid "+b+" '"+a[b]+"': numbers and lowercase letters allowed only")},INVALID_ARGUMENTS:function(a){return new Error(a)},NOT_FOUND:function(a,b){return new Error(""+a+" with "+b+" could not be found")}},Hoodie.Remote=function(){function a(a,b){this.hoodie=a,b==null&&(b={}),this._handlePushSuccess=__bind(this._handlePushSuccess,this),this._handlePullResults=__bind(this._handlePullResults,this),this._handlePullError=__bind(this._handlePullError,this),this._handlePullSuccess=__bind(this._handlePullSuccess,this),this._restartPullRequest=__bind(this._restartPullRequest,this),this.sync=__bind(this.sync,this),this.push=__bind(this.push,this),this.pull=__bind(this.pull,this),this.stopSyncing=__bind(this.stopSyncing,this),this.startSyncing=__bind(this.startSyncing,this),this.disconnect=__bind(this.disconnect,this),this.connect=__bind(this.connect,this),b.name!=null&&(this.name=b.name,this.prefix=this.name),b.prefix!=null&&(this.prefix=b.prefix),b.sync&&(this._sync=b.sync),this.store=new Hoodie.RemoteStore(this.hoodie,this),this.isContinuouslySyncing()&&this.startSyncing()}return a.prototype.name=void 0,a.prototype._sync=!1,a.prototype.prefix="",a.prototype.request=function(a,b,c){c==null&&(c={}),this.name&&(b="/"+encodeURIComponent(this.name)+b),c.contentType||(c.contentType="application/json");if(a==="POST"||a==="PUT")c.dataType||(c.dataType="json"),c.processData||(c.processData=!1),c.data=JSON.stringify(c.data);return this.hoodie.request(a,b,c)},a.prototype.get=function(a,b){return console.log.apply(console,[".get() not yet implemented"].concat(__slice.call(arguments)))},a.prototype.post=function(a,b){return console.log.apply(console,[".post() not yet implemented"].concat(__slice.call(arguments)))},a.prototype.connect=function(a){return this.connected=!0,this.sync()},a.prototype.disconnect=function(){var a,b;return this.connected=!1,(a=this._pullRequest)!=null&&a.abort(),(b=this._pushRequest)!=null?b.abort():void 0},a.prototype.startSyncing=function(){return this._sync=!0,this.connect()},a.prototype.stopSyncing=function(){return this._sync=!1},a.prototype.isContinuouslyPulling=function(){var a;return this._sync===!0||((a=this._sync)!=null?a.pull:void 0)===!0},a.prototype.isContinuouslyPushing=function(){var a;return this._sync===!0||((a=this._sync)!=null?a.push:void 0)===!0},a.prototype.isContinuouslySyncing=function(){return this._sync===!0},a.prototype.getSinceNr=function(){return this._since||0},a.prototype.setSinceNr=function(a){return this._since=a},a.prototype.pull=function(){return this._pullRequest=this.request("GET",this._pullUrl()),this.connected&&this.isContinuouslyPulling()&&(window.clearTimeout(this._pullRequestTimeout),this._pullRequestTimeout=window.setTimeout(this._restartPullRequest,25e3)),this._pullRequest.then(this._handlePullSuccess,this._handlePullError)},a.prototype.push=function(a){var b,c,d,e;if(a!=null?!a.length:!void 0)return this.hoodie.defer().resolve([]).promise();c=[];for(d=0,e=a.length;d<e;d++)b=a[d],c.push(this.store.parseForRemote(b));return this._pushRequest=this.request("POST","/_bulk_docs",{data:{docs:c,new_edits:!1}}),this._pushRequest.done(this._handlePushSuccess(a,c))},a.prototype.sync=function(a){return this.push(a).pipe(this.pull)},a.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.name+":$2"),this.hoodie.on(a,b)},a.prototype.one=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.name+":$2"),this.hoodie.one(a,b)},a.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,[""+this.name+":"+a].concat(__slice.call(b)))},a.prototype._pullUrl=function(){var a;return a=this.getSinceNr(),this.isContinuouslyPulling()?"/_changes?include_docs=true&since="+a+"&heartbeat=10000&feed=longpoll":"/_changes?include_docs=true&since="+a},a.prototype._restartPullRequest=function(){var a;return(a=this._pullRequest)!=null?a.abort():void 0},a.prototype._handlePullSuccess=function(a){this.setSinceNr(a.last_seq),this._handlePullResults(a.results);if(this.connected&&this.isContinuouslyPulling())return this.pull()},a.prototype._handlePullError=function(a,b,c){if(!this.connected)return;switch(a.status){case 401:return this.trigger("error:unauthenticated",b),this.disconnect();case 404:return window.setTimeout(this.pull,3e3);case 500:return this.trigger("error:server",b),window.setTimeout(this.pull,3e3);default:if(!this.isContinuouslyPulling())return;return a.statusText==="abort"?this.pull():window.setTimeout(this.pull,3e3)}},a.prototype._knownObjects={},a.prototype._handlePullResults=function(a){var b,c,d,e,f,g;g=[];for(e=0,f=a.length;e<f;e++)b=a[e].doc,d=this.store.parseFromRemote(b),d._deleted?(c="remove",delete this._knownObjects[b._id]):this._knownObjects[b._id]?c="update":(c="add",this._knownObjects[b._id]=1),this.trigger("store:"+c,d),this.trigger("store:"+c+":"+d.$type,d),this.trigger("store:"+c+":"+d.$type+":"+d.id,d),this.trigger("store:change",c,d),this.trigger("store:change:"+d.$type,c,d),g.push(this.trigger("store:change:"+d.$type+":"+d.id,c,d));return g},a.prototype._handlePushSuccess=function(a,b){},a}(),Hoodie.Share=function(){function a(a){var b;return this.hoodie=a,this._open=__bind(this._open,this),this.instance=Hoodie.ShareInstance,b=this._open,$.extend(b,this),this.hoodie.store.decoratePromises({shareAt:this._storeShareAt,unshareAt:this._storeUnshareAt,unshare:this._storeUnshare,share:this._storeShare}),b}return a.prototype.add=function(a){var b=this;return a==null&&(a={}),this.hoodie.store.add("$share",this._filterShareOptions(a)).pipe(function(a){return b.hoodie.account.hasAccount()||b.hoodie.account.anonymousSignUp(),new b.instance(b.hoodie,a)})},a.prototype.find=function(a){var b=this;return this.hoodie.store.find("$share",a).pipe(function(a){return new b.instance(b.hoodie,a)})},a.prototype.findAll=function(){var a=this;return this.hoodie.store.findAll("$share").pipe(function(b){var c,d,e,f;f=[];for(d=0,e=b.length;d<e;d++)c=b[d],f.push(new a.instance(a.hoodie,c));return f})},a.prototype.findOrAdd=function(a,b){var c=this;return this.hoodie.store.findOrAdd("$share",a,this._filterShareOptions(b)).pipe(function(a){return c.hoodie.account.hasAccount()||c.hoodie.account.anonymousSignUp(),new c.instance(c.hoodie,a)})},a.prototype.save=function(a,b){var c=this;return this.hoodie.store.save("$share",a,this._filterShareOptions(b)).pipe(function(a){return new c.instance(c.hoodie,a)})},a.prototype.update=function(a,b){var c=this;return this.hoodie.store.update("$share",a,this._filterShareOptions(b)).pipe(function(a){return new c.instance(c.hoodie,a)})},a.prototype.updateAll=function(a){var b=this;return this.hoodie.store.updateAll("$share",this._filterShareOptions(a)).pipe(function(a){var c,d,e,f;f=[];for(d=0,e=a.length;d<e;d++)c=a[d],f.push(new b.instance(b.hoodie,c));return f})},a.prototype.remove=function(a){return this.hoodie.store.findAll(function(b){return b.$shares[a]}).unshareAt(a),this.hoodie.store.remove("$share",a)},a.prototype.removeAll=function(){return this.hoodie.store.findAll(function(a){return a.$shares}).unshare(),this.hoodie.store.removeAll("$share")},a.prototype._allowedOptions=["id","access","$createdBy"],a.prototype._filterShareOptions=function(a){var b,c,d,e,f;a==null&&(a={}),b={},f=this._allowedOptions;for(d=0,e=f.length;d<e;d++)c=f[d],a.hasOwnProperty(c)&&(b[c]=a[c]);return b},a.prototype._open=function(a,b){return b==null&&(b={}),$.extend(b,{id:a}),new this.instance(this.hoodie,b)},a.prototype._storeShareAt=function(a,b){var c=this;return this.pipe(function(d){var e,f,g,h,i;f=function(d){return d.$shares||(d.$shares={}),d.$shares[a]=b||!0,c.hoodie.store.update(d.$type,d.id,{$shares:d.$shares}),d};if($.isArray(d)){i=[];for(g=0,h=d.length;g<h;g++)e=d[g],i.push(f(e));return i}return f(d)})},a.prototype._storeUnshareAt=function(a){var b=this;return this.pipe(function(c){var d,e,f,g,h;e=function(c){return!c.$shares||!c.$shares[a]?c:(c.$shares[a]=!1,b.hoodie.store.update(c.$type,c.id,{$shares:c.$shares}),c)};if($.isArray(c)){h=[];for(f=0,g=c.length;f<g;f++)d=c[f],h.push(e(d));return h}return e(c)})},a.prototype._storeUnshare=function(){var a=this;return this.pipe(function(b){var c,d,e,f,g;d=function(b){var c;if(!b.$shares)return b;for(c in b.$shares)b.$shares[c]=!1;return a.hoodie.store.update(b.$type,b.id,{$shares:b.$shares}),b};if($.isArray(b)){g=[];for(e=0,f=b.length;e<f;e++)c=b[e],g.push(d(c));return g}return d(b)})},a.prototype._storeShare=function(a){var b=this;return this.pipe(function(c){return b.hoodie.share.add().pipe(function(d){var e,f,g;return f=function(c){return c.$shares||(c.$shares={}),c.$shares[d.id]=a||!0,b.hoodie.store.update(c.$type,c.id,{$shares:c.$shares}),c},g=function(){var a,b,d;if($.isArray(c)){d=[];for(a=0,b=c.length;a<b;a++)e=c[a],d.push(f(e));return d}return f(c)}(),b.hoodie.defer().resolve(g,d).promise()})})},a}(),Hoodie.extend("share",Hoodie.Share),Hoodie.Store=function(){function a(a){this.hoodie=a}return a.prototype.save=function(a,b,c,d){var e;return d==null&&(d={}),e=this.hoodie.defer(),typeof c!="object"?(e.reject(Hoodie.Errors.INVALID_ARGUMENTS("object is "+typeof c)),e.promise()):b&&!this._isValidId(b)?e.reject(Hoodie.Errors.INVALID_KEY({id:b})).promise():this._isValidType(a)?e:e.reject(Hoodie.Errors.INVALID_KEY({type:a})).promise()},a.prototype.add=function(a,b,c){return b==null&&(b={}),c==null&&(c={}),this.save(a,b.id,b)},a.prototype.update=function(a,b,c,d){var e,f,g=this;return e=this.hoodie.defer(),f=this.find(a,b).pipe(function(f){var h,i,j;return typeof c=="function"&&(c=c($.extend({},f))),c?(h=function(){var a;a=[];for(i in c){j=c[i];if(f[i]===j)continue;f[i]=j,a.push(i)}return a}(),!h.length&&!d?e.resolve(f):g.save(a,b,f,d).then(e.resolve,e.reject)):e.resolve(f)}),f.fail(function(){return g.save(a,b,c,d).then(e.resolve,e.reject)}),e.promise()},a.prototype.updateAll=function(a,b,c){var d,e=this;c==null&&(c={});switch(!0){case typeof a=="string":d=this.findAll(a);break;case this.hoodie.isPromise(a):d=a;break;case $.isArray(a):d=this.hoodie.defer().resolve(a).promise();break;default:d=this.findAll()}return d.pipe(function(a){var d,f,g;return d=e.hoodie.defer(),$.isArray(a)||(a=[a]),g=function(){var d,e,g;g=[];for(d=0,e=a.length;d<e;d++)f=a[d],g.push(this.update(f.$type,f.id,b,c));return g}.call(e),$.when.apply(null,g).then(d.resolve),d.promise()})},a.prototype.find=function(a,b){var c;return c=this.hoodie.defer(),typeof a!="string"||typeof b!="string"?c.reject(Hoodie.Errors.INVALID_ARGUMENTS("type & id are required")).promise():c},a.prototype.findOrAdd=function(a,b,c){var d,e=this;return c==null&&(c={}),d=this.hoodie.defer(),this.find(a,b).done(d.resolve).fail(function(){var f;return f=$.extend({id:b},c),e.add(a,f).then(d.resolve,d.reject)}),d.promise()},a.prototype.findAll=function(){return this.hoodie.defer()},a.prototype.remove=function(a,b,c){var d;return c==null&&(c={}),d=this.hoodie.defer(),typeof a!="string"||typeof b!="string"?d.reject(Hoodie.Errors.INVALID_ARGUMENTS("type & id are required")).promise():d},a.prototype.removeAll=function(a,b){var c=this;return b==null&&(b={}),this.findAll(a).pipe(function(a){var d,e,f,g;g=[];for(e=0,f=a.length;e<f;e++)d=a[e],g.push(c.remove(d.$type,d.id,b));return g})},a.prototype._now=function(){return new Date},a.prototype._isValidId=function(a){return/^[a-z0-9\-]+$/.test(a)},a.prototype._isValidType=function(a){return/^[a-z$][a-z0-9]+$/.test(a)},a}(),Hoodie.User=function(){function a(a){var b=this;return this.hoodie=a,this.hoodie.store.decoratePromises({publish:this._storePublish,unpublish:this._storeUnpublish}),function(a,c){return c==null&&(c={}),$.extend(c,{prefix:"$public"}),b.hoodie.open("user/"+a+"/public",c)}}return a.prototype._storePublish=function(a){var b=this;return this.pipe(function(c){var d,e,f,g;$.isArray(c)||(c=[c]),g=[];for(e=0,f=c.length;e<f;e++)d=c[e],g.push(b.hoodie.store.update(d.$type,d.id,{$public:a||!0}));return g})},a.prototype._storeUnpublish=function(){var a=this;return this.pipe(function(b){var c,d,e,f;$.isArray(b)||(b=[b]),f=[];for(d=0,e=b.length;d<e;d++)c=b[d],c.$public&&f.push(a.hoodie.store.update(c.$type,c.id,{$public:!1}));return f})},a}(),Hoodie.extend("user",Hoodie.User),Hoodie.Global=function(){function a(a){return a.open("global")}return a}(),Hoodie.extend("global",Hoodie.Global),Hoodie.AccountRemote=function(a){function b(a,c){this.hoodie=a,c==null&&(c={}),this._handlePullResults=__bind(this._handlePullResults,this),this._handlePushSuccess=__bind(this._handlePushSuccess,this),this._handleSignIn=__bind(this._handleSignIn,this),this.push=__bind(this.push,this),this.sync=__bind(this.sync,this),this.stopSyncing=__bind(this.stopSyncing,this),this.startSyncing=__bind(this.startSyncing,this),this.connect=__bind(this.connect,this),this.name=this.hoodie.account.db(),this.hoodie.config.get("_remote.sync")!=null&&(this._sync=this.hoodie.config.get("_remote.sync")),c.prefix="",b.__super__.constructor.call(this,this.hoodie,c)}return __extends(b,a),b.prototype._sync=!0,b.prototype.connect=function(){var a=this;return this.hoodie.account.authenticate().pipe(function(){return b.__super__.connect.apply(a,arguments)})},b.prototype.disconnect=function(){return this.hoodie.unbind("store:idle",this.push),b.__super__.disconnect.apply(this,arguments)},b.prototype.startSyncing=function(){return this.hoodie.config.set("_remote.sync",!0),this.hoodie.on("account:signin",this._handleSignIn),this.hoodie.on("account:signout",this.disconnect),b.__super__.startSyncing.apply(this,arguments)},b.prototype.stopSyncing=function(){return this.hoodie.config.set("_remote.sync",!1),this.hoodie.unbind("account:signin",this._handleSignIn),this.hoodie.unbind("account:signout",this.disconnect),b.__super__.stopSyncing.apply(this,arguments)},b.prototype.sync=function(a){return this.isContinuouslyPushing()&&(this.hoodie.unbind("store:idle",this.push),this.hoodie.on("store:idle",this.push)),b.__super__.sync.apply(this,arguments)},b.prototype.getSinceNr=function(a){return this.hoodie.config.get("_remote.since")||0},b.prototype.setSinceNr=function(a){return this.hoodie.config.set("_remote.since",a)},b.prototype.push=function(a){var c;return $.isArray(a)||(a=this.hoodie.store.changedDocs()),c=b.__super__.push.call(this,a)},b.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1remote:$2"),this.hoodie.on(a,b)},b.prototype.one=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1remote:$2"),this.hoodie.one(a,b)},b.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,["remote:"+a].concat(__slice.call(b)))},b.prototype._handleSignIn=function(){return this.name=this.hoodie.account.db(),this.connect()},b.prototype._handlePushSuccess=function(a,b){var c=this;return function(){var d,e,f,g,h,i,j;j=[];for(e=h=0,i=a.length;h<i;e=++h)d=a[e],g={_rev:b[e]._rev},f={remote:!0},j.push(c.hoodie.store.update(d.$type,d.id,g,f));return j}},b.prototype._handlePullResults=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=this;m=[],d=[];for(e=0,h=a.length;e<h;e++)b=a[e].doc,b=this.store.parseFromRemote(b),b._deleted?m.push([b,this.hoodie.store.remove(b.$type,b.id,{remote:!0})]):d.push([b,this.hoodie.store.save(b.$type,b.id,b,{remote:!0})]);for(f=0,i=m.length;f<i;f++)k=m[f],b=k[0],c=k[1],c.then(function(a){return o.trigger("remove",a),o.trigger("remove:"+b.$type,a),o.trigger("remove:"+b.$type+":"+b.id,a),o.trigger("change","remove",a),o.trigger("change:"+b.$type,"remove",a),o.trigger("change:"+b.$type+":"+b.id,"remove",a)});n=[];for(g=0,j=d.length;g<j;g++)l=d[g],b=l[0],c=l[1],n.push(c.then(function(a,c){var d;d=c?"create":"update",o.trigger(d,a),o.trigger(""+d+":"+b.$type,a),d!=="create"&&o.trigger(""+d+":"+b.$type+":"+b.id,a),o.trigger("change",d,a),o.trigger("change:"+b.$type,d,a);if(d!=="create")return o.trigger("change:"+b.$type+":"+b.id,d,a)}));return n},b}(Hoodie.Remote),Hoodie.LocalStore=function(a){function b(a){this.hoodie=a,this.clear=__bind(this.clear,this),this.markAllAsChanged=__bind(this.markAllAsChanged,this),this.isPersistent()||(this.db={getItem:function(){return null},setItem:function(){return null},removeItem:function(){return null},key:function(){return null},length:0,clear:function(){return null}}),this.hoodie.on("account:signout",this.clear),this.hoodie.on("account:signup",this.markAllAsChanged),this._promiseApi.hoodie=this.hoodie,this._bootstrap()}return __extends(b,a),b.prototype.idleTimeout=2e3,b.prototype.db={getItem:function(a){return window.localStorage.getItem(a)},setItem:function(a,b){return window.localStorage.setItem(a,b)},removeItem:function(a){return window.localStorage.removeItem(a)},key:function(a){return window.localStorage.key(a)},length:function(){return window.localStorage.length},clear:function(){return window.localStorage.clear()}},b.prototype.save=function(a,c,d,e){var f,g,h,i,j;e==null&&(e={}),g=b.__super__.save.apply(this,arguments);if(this.hoodie.isPromise(g))return this._decoratePromise(g);d=$.extend(!0,{},d),c?(f=this.cache(a,c),i=typeof f!="object"):(i=!0,c=this.hoodie.uuid()),i&&this.hoodie.account&&(d.$createdBy||(d.$createdBy=this.hoodie.account.ownerHash));if(!i){delete d.$updatedBy;for(j in f)if(!d.hasOwnProperty(j))switch(j.charAt(0)){case"_":e.remote&&(d[j]=f[j]);break;case"$":e.remote||(d[j]=f[j])}}e.remote?d._$syncedAt=this._now():e.silent||(d.$updatedAt=this._now(),d.$createdAt||(d.$createdAt=d.$updatedAt));try{d=this.cache(a,c,d,e),g.resolve(d,i).promise(),h=i?"add":"update",this._triggerEvents(h,d,e)}catch(k){g.reject(k).promise()}return this._decoratePromise(g.promise())},b.prototype.find=function(a,c){var d,e;d=b.__super__.find.apply(this,arguments);if(this.hoodie.isPromise(d))return this._decoratePromise(d);try{e=this.cache(a,c),e||d.reject(Hoodie.Errors.NOT_FOUND(a,c)).promise(),d.resolve(e)}catch(f){d.reject(f)}return this._decoratePromise(d.promise())},b.prototype.findAll=function(a){var c,d,e,f,g,h,i,j;a==null&&(a=function(){return!0}),d=b.__super__.findAll.apply(this,arguments);if(this.hoodie.isPromise(d))return this._decoratePromise(d);g=this._index(),typeof a=="string"&&(j=a,a=function(a){return a.$type===j});try{i=function(){var b,d,i,j;j=[];for(b=0,d=g.length;b<d;b++){f=g[b];if(!this._isSemanticId(f))continue;i=f.split("/"),c=i[0],e=i[1],h=this.cache(c,e);if(!h||!a(h))continue;j.push(h)}return j}.call(this),d.resolve(i).promise()}catch(k){d.reject(k).promise()}return this._decoratePromise(d.promise())},b.prototype.remove=function(a,c,d){var e,f,g,h;return d==null&&(d={}),e=b.__super__.remove.apply(this,arguments),this.hoodie.isPromise(e)?this._decoratePromise(e):(g=this.cache(a,c),g?(g._$syncedAt&&!d.remote?(g._deleted=!0,this.cache(a,c,g)):(f=""+a+"/"+c,this.db.removeItem(f),this._cached[f]=!1,this.clearChanged(a,c)),this._triggerEvents("remove",g,d),h=e.resolve($.extend(!0,{},g)).promise(),this._decoratePromise(h)):this._decoratePromise(e.reject(Hoodie.Errors.NOT_FOUND(a,c)).promise()))},b.prototype.update=function(){return this._decoratePromise(b.__super__.update.apply(this,arguments))},b.prototype.updateAll=function(){return this._decoratePromise(b.__super__.updateAll.apply(this,arguments))},b.prototype.removeAll=function(){return this._decoratePromise(b.__super__.removeAll.apply(this,arguments))},b.prototype.cache=function(a,b,c,d){var e;c==null&&(c=!1),d==null&&(d={}),e=""+a+"/"+b;if(c){$.extend(!0,c,{$type:a,id:b}),this._setObject(a,b,c);if(d.remote)return this.clearChanged(a,b),this._cached[e]=c,$.extend(!0,{},this._cached[e])}else{if(this._cached[e]===!1)return!1;if(this._cached[e])return $.extend(!0,{},this._cached[e]);c=this._getObject(a,b)}if(c===void 0)return;return c===!1?(this.clearChanged(a,b),this._cached[e]=!1,!1):this._isMarkedAsDeleted(c)?(this.markAsChanged(a,b,c,d),this._cached[e]=!1,!1):(this._cached[e]=c,this._isDirty(c)?this.markAsChanged(a,b,c,d):this.clearChanged(a,b),$.extend(!0,{},this._cached[e]))},b.prototype.clearChanged=function(a,b){var c;return a&&b?(c=""+a+"/"+b,delete this._dirty[c]):this._dirty={},this._saveDirtyIds(),window.clearTimeout(this._dirtyTimeout)},b.prototype.isMarkedAsDeleted=function(a,b){return this._isMarkedAsDeleted(this.cache(a,b))},b.prototype.markAsChanged=function(a,b,c,d){var e;d==null&&(d={}),e=""+a+"/"+b,this._dirty[e]=c,this._saveDirtyIds();if(d.silent)return;return this._trigger_dirty_and_idle_events()},b.prototype.markAllAsChanged=function(){var a=this;return this.findAll().pipe(function(b){var c,d,e,f;for(e=0,f=b.length;e<f;e++)d=b[e],c=""+d.$type+"/"+d.id,a._dirty[c]=d;return a._saveDirtyIds(),a._trigger_dirty_and_idle_events()})},b.prototype.changedDocs=function(){var a,b,c,d,e,f,g;e=this._dirty,g=[];for(b in e)c=e[b],f=b.split("/"),d=f[0],a=f[1],c.$type=d,c.id=a,g.push(c);return g},b.prototype.isDirty=function(a,b){return a?this._isDirty(this.cache(a,b)):$.isEmptyObject(this._dirty)},b.prototype.clear=function(){var a;a=this.hoodie.defer();try{this.db.clear(),this._cached={},this.clearChanged(),a.resolve(),this.trigger("clear")}catch(b){a.reject(b)}return a.promise()},b.prototype.isPersistent=function(){try{if(!window.localStorage)return!1;localStorage.setItem("Storage-Test","1");if(localStorage.getItem("Storage-Test")!=="1")return!1;localStorage.removeItem("Storage-Test")}catch(a){return!1}return!0},b.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,["store:"+a].concat(__slice.call(b)))},b.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1store:$2"),this.hoodie.on(a,b)},b.prototype.decoratePromises=function(a){return $.extend(this._promiseApi,a)},b.prototype._bootstrap=function(){var a,b,c,d,e,f,g,h,i;c=this.db.getItem("_dirty");if(!c)return;i=[];for(f=0,g=c.length;f<g;f++)b=c[f],h=b.split("/"),e=h[0],a=h[1],i.push(d=this.cache(e,a));return i},b.prototype._setObject=function(a,b,c){var d,e;return d=""+a+"/"+b,e=$.extend({},c),delete e.$type,delete e.id,this.db.setItem(d,JSON.stringify(e))},b.prototype._getObject=function(a,b){var c,d,e;return d=""+a+"/"+b,c=this.db.getItem(d),c?(e=JSON.parse(c),e.$type=a,e.id=b,e.$createdAt&&(e.$createdAt=new Date(Date.parse(e.$createdAt))),e.$updatedAt&&(e.$updatedAt=new Date(Date.parse(e.$updatedAt))),e._$syncedAt&&(e._$syncedAt=new Date(Date.parse(e._$syncedAt))),e):!1},b.prototype._saveDirtyIds=function(){var a;return $.isEmptyObject(this._dirty)?this.db.removeItem("_dirty"):(a=Object.keys(this._dirty),this.db.setItem("_dirty",a.join(",")))},b.prototype._now=function(){return new Date},b.prototype._isValidId=function(a){return/^[a-z0-9\-]+$/.test(a)},b.prototype._isValidType=function(a){return/^[a-z$][a-z0-9]+$/.test(a)},b.prototype._isSemanticId=function(a){return/^[a-z$][a-z0-9]+\/[a-z0-9]+$/.test(a)},b.prototype._cached={},b.prototype._dirty={},b.prototype._isDirty=function(a){return a.$updatedAt?a._$syncedAt?a._$syncedAt.getTime()<a.$updatedAt.getTime():!0:!1},b.prototype._isMarkedAsDeleted=function(a){return a._deleted===!0},b.prototype._index=function(){var a,b,c,d;d=[];for(a=b=0,c=this.db.length();0<=c?b<c:b>c;a=0<=c?++b:--b)d.push(this.db.key(a));return d},b.prototype._triggerEvents=function(a,b,c){this.trigger(a,b,c),this.trigger(""+a+":"+b.$type,b,c),a!=="new"&&this.trigger(""+a+":"+b.$type+":"+b.id,b,c),this.trigger("change",a,b,c),this.trigger("change:"+b.$type,a,b,c);if(a!=="new")return this.trigger("change:"+b.$type+":"+b.id,a,b,c)},b.prototype._trigger_dirty_and_idle_events=function(){var a=this;return this.trigger("dirty"),window.clearTimeout(this._dirtyTimeout),this._dirtyTimeout=window.setTimeout(function(){return a.trigger("idle")},this.idleTimeout)},b.prototype._promiseApi={},b.prototype._decoratePromise=function(a){return $.extend(a,this._promiseApi)},b}(Hoodie.Store),Hoodie.RemoteStore=function(a){function b(a,b){this.hoodie=a,this.remote=b,this._mapDocsFromFindAll=__bind(this._mapDocsFromFindAll,this),this.parseAllFromRemote=__bind(this.parseAllFromRemote,this),this.parseFromRemote=__bind(this.parseFromRemote,this)}return __extends(b,a),b.prototype.find=function(a,c){var d,e;return d=b.__super__.find.apply(this,arguments),this.hoodie.isPromise(d)?d:(e="/"+encodeURIComponent(""+a+"/"+c),this.remote.request("GET",e).pipe(this.parseFromRemote))},b.prototype.findAll=function(a){var c,d,e,f;c=b.__super__.findAll.apply(this,arguments);if(this.hoodie.isPromise(c))return c;e="/_all_docs?include_docs=true";switch(!0){case a!=null&&this.remote.prefix!=="":d=""+this.remote.prefix+"/"+a;break;case a!=null:d=a;break;case this.remote.prefix!=="":d=this.remote.prefix;break;default:d=""}return d&&(e=""+e+'&startkey="'+d+'/"&endkey="'+d+'0"'),f=this.remote.request("GET",e),f.fail(c.reject),f.pipe(this._mapDocsFromFindAll).pipe(this.parseAllFromRemote).done(c.resolve),c.promise()},b.prototype.save=function(a,c,d){var e,f,g;return e=b.__super__.save.apply(this,arguments),this.hoodie.isPromise(e)?e:(c||(c=this.hoodie.uuid()),d=$.extend({$type:a,id:c},d),f=this.parseForRemote(d),g="/"+encodeURIComponent(f._id),this.remote.request("PUT",g,{data:f}))},b.prototype.remove=function(a,b){return this.update(a,b,{_deleted:!0})},b.prototype.removeAll=function(a){return this.updateAll(a,{_deleted:!0})},b.prototype.parseForRemote=function(a){var b,c;c=$.extend({},a);for(b in c){if(~this._validSpecialAttributes.indexOf(b))continue;if(!/^_/.test(b))continue;delete c[b]}return c._id=""+c.$type+"/"+c.id,this.remote.prefix&&(c._id=""+this.remote.prefix+"/"+c._id),delete c.id,this._addRevisionTo(c),c},b.prototype.parseFromRemote=function(a){var b,c;return b=a._id||a.id,delete a._id,this.remote.prefix&&(b=b.replace(RegExp("^"+this.remote.prefix+"/"),"")),c=b.split(/\//),a.$type=c[0],a.id=c[1],a.$createdAt&&(a.$createdAt=new Date(Date.parse(a.$createdAt))),a.$updatedAt&&(a.$updatedAt=new Date(Date.parse(a.$updatedAt))),a.rev&&(a._rev=a.rev,delete a.rev),a},b.prototype.parseAllFromRemote=function(a){var b,c,d,e;e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(this.parseFromRemote(b));return e},b.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.remote.name+":store:$2"),this.hoodie.on(a,b)},b.prototype.one=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.remote.name+":store:$2"),this.hoodie.one(a,b)},b.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,[""+this.remote.name+":store:"+a].concat(__slice.call(b)))},b.prototype._validSpecialAttributes=["_id","_rev","_deleted","_revisions","_attachments"],b.prototype._generateNewRevisionId=function(){return this.hoodie.uuid(9)},b.prototype._addRevisionTo=function(a){var b,c,d,e;try{e=a._rev.split(/-/),c=e[0],b=e[1]}catch(f){}c=parseInt(c,10)||0,d=this._generateNewRevisionId(),a._rev=""+(c+1)+"-"+d,a._revisions={start:1,ids:[d]};if(b)return a._revisions.start+=c,a._revisions.ids.push(b)},b.prototype._mapDocsFromFindAll=function(a){return a.rows.map(function(a){return a.doc})},b}(Hoodie.Store),Hoodie.ShareInstance=function(a){function b(a,c){this.hoodie=a,c==null&&(c={}),this._handleSecurityResponse=__bind(this._handleSecurityResponse,this),this.id=c.id||this.hoodie.uuid(),this.name="share/"+this.id,this.prefix=this.name,c.sync!=null&&(c._sync=c.sync,delete c.sync),$.extend(this,c),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.access=!1,b.prototype.subscribe=function(){return this.request("GET","/_security").pipe(this._handleSecurityResponse)},b.prototype.unsubscribe=function(){return this.hoodie.share.remove(this.id),this},b.prototype.grantReadAccess=function(a){var b,c,d,e;if(this.access===!0||this.access.read===!0)return this.hoodie.resolveWith(this);typeof a=="string"&&(a=[a]);if(this.access===!1||this.access.read===!1)this.access.read!=null?this.access.read=a||!0:this.access=a||!0;if(a){b=this.access.read||this.access;for(d=0,e=a.length;d<e;d++)c=a[d],b.indexOf(c)===-1&&b.push(c);this.access.read!=null?this.access.read=b:this.access=b}else this.access.read!=null?this.access.read=!0:this.access=!0;return this.hoodie.share.update(this.id,{access:this.access})},b.prototype.revokeReadAccess=function(a){var b,c,d,e,f,g;this.revokeWriteAccess(a);if(this.access===!1||this.access.read===!1)return this.hoodie.resolveWith(this);if(a){if(this.access===!0||this.access.read===!0)return this.hoodie.rejectWith(this);typeof a=="string"&&(a=[a]),c=this.access.read||this.access,b=!1;for(f=0,g=a.length;f<g;f++)e=a[f],d=c.indexOf(e),d!==-1&&(c.splice(d,1),b=!0);if(!b)return this.hoodie.resolveWith(this);c.length===0&&(c=!1),this.access.read!=null?this.access.read=c:this.access=c}else this.access=!1;return this.hoodie.share.update(this.id,{access:this.access})},b.prototype.grantWriteAccess=function(a){return this.grantReadAccess(a),this.access.read==null&&(this.access={read:this.access}),this.access.write===!0?this.hoodie.resolveWith(this):(a?(typeof a=="string"&&(a=[a]),this.access.write=a):this.access.write=!0,this.hoodie.share.update(this.id,{access:this.access}))},b.prototype.revokeWriteAccess=function(a){var b,c,d,e;if(this.access.write==null)return this.hoodie.resolveWith(this);if(a){if(typeof this.access.write=="boolean")return this.hoodie.rejectWith(this);typeof a=="string"&&(a=[a]);for(d=0,e=a.length;d<e;d++)c=a[d],b=this.access.write.indexOf(c),b!==-1&&this.access.write.splice(b,1);this.access.write.length===0&&(this.access=this.access.read)}else this.access=this.access.read;return this.hoodie.share.update(this.id,{access:this.access})},b.prototype._handleSecurityResponse=function(a){var b,c;return c=this._parseSecurity(a),b="$subscription",this.hoodie.share.findOrAdd(this.id,{access:c,$createdBy:b})},b.prototype._parseSecurity=function(a){var b,c,d,e,f;return c=(e=a.members)!=null?e.roles:void 0,d=(f=a.writers)!=null?f.roles:void 0,b={},c!=null&&(b.read=c===!0||c.length===0,c.length&&(b.read=-1!==c.indexOf(this.hoodie.account.ownerHash))),d!=null&&(b.write=d===!0||d.length===0,d.length&&(b.write=-1!==d.indexOf(this.hoodie.account.ownerHash))),b},b}(Hoodie.Remote);var HoodieAdminClass=function(a){this.hoodie=a};HoodieAdminClass.prototype={users:{findAll:function(){},search:function(){}},config:{get:function(){},set:function(){}},on:function(){},logs:{findAll:function(){}},stats:function(a){stats={signups:12,account_deletions:1,users_active:1302,users_total:4211,growth:.04,active:-0.02};if(!a)for(key in stats)stats[key]=stats[key]*17;return this.hoodie.defer().resolve(stats).promise()}},Hoodie.extend("admin",HoodieAdminClass);